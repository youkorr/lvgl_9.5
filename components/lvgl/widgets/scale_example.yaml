# ESPHome LVGL Scale Widget Examples
# =============================================================================
# LVGL v9.4 Scale Widget - Complete Examples
# Covers all 12 examples from the LVGL documentation:
# https://docs.lvgl.io/master/widgets/scale.html
#
# Scale Modes:
#   - ROUND_OUTER: Circular with ticks outside
#   - ROUND_INNER: Circular with ticks inside
#   - HORIZONTAL_TOP: Horizontal with ticks on top
#   - HORIZONTAL_BOTTOM: Horizontal with ticks on bottom
#   - VERTICAL_LEFT: Vertical with ticks on left
#   - VERTICAL_RIGHT: Vertical with ticks on right
#
# New Features (v9.4 complete):
#   - Needles: line and image needles (lv_scale_set_line_needle_value)
#   - text_src: custom label text (lv_scale_set_text_src)
#   - Section multi-part styling: MAIN, INDICATOR, ITEMS per section
#   - Label transforms: rotate_match_ticks, keep_upright, translate
#   - Draw event callback: custom_label_cb for label customization
#
# Actions:
#   - lvgl.scale.update: Update scale properties
#   - lvgl.scale.section.update: Update section color/range
#   - lvgl.scale.needle.update: Update needle value
# =============================================================================

globals:
  # Animation counters for gauges
  - id: speed_value
    type: int
    initial_value: "0"
  - id: speed_direction
    type: int
    initial_value: "1"
  - id: temp_value
    type: int
    initial_value: "20"
  - id: pressure_value
    type: int
    initial_value: "5"
  # Clock example (example 6)
  - id: clock_hour
    type: int
    initial_value: "10"
  - id: clock_minute
    type: int
    initial_value: "10"
  - id: clock_second
    type: int
    initial_value: "30"
  # Heart rate (example 10)
  - id: heart_rate_value
    type: int
    initial_value: "72"
  - id: hr_direction
    type: int
    initial_value: "1"
  # Compass heading (example 12)
  - id: compass_heading
    type: int
    initial_value: "0"
  # Need for Speed Racing Dashboard
  - id: nfs_speed
    type: int
    initial_value: "0"
  - id: nfs_rpm
    type: int
    initial_value: "800"
  - id: nfs_gear
    type: int
    initial_value: "1"
  - id: nfs_accelerating
    type: bool
    initial_value: "true"

# =============================================================================
# SENSORS - Home Assistant Integration
# =============================================================================
sensor:
  - platform: homeassistant
    id: ha_temperature
    entity_id: sensor.temperature
    on_value:
      then:
        - lvgl.arc.update:
            id: temp_arc
            value: !lambda 'return (int)id(ha_temperature).state;'
            animated: true
        - lvgl.label.update:
            id: temp_value_label
            text:
              format: "%.1f°C"
              args: [id(ha_temperature).state]

  - platform: homeassistant
    id: ha_humidity
    entity_id: sensor.humidity
    on_value:
      then:
        - lvgl.arc.update:
            id: humidity_arc
            value: !lambda 'return (int)id(ha_humidity).state;'
            animated: true
        - lvgl.label.update:
            id: humidity_value_label
            text:
              format: "%.0f%%"
              args: [id(ha_humidity).state]

# =============================================================================
# ANIMATIONS - Demo gauges without sensors
# =============================================================================
interval:
  # Speedometer animation (50ms)
  - interval: 50ms
    then:
      - lambda: |-
          id(speed_value) += id(speed_direction) * 2;
          if (id(speed_value) >= 200) id(speed_direction) = -1;
          if (id(speed_value) <= 0) id(speed_direction) = 1;
      - lvgl.arc.update:
          id: speed_arc
          value: !lambda 'return id(speed_value);'
          animated: true
      - lvgl.label.update:
          id: speed_value_label
          text:
            format: "%d"
            args: [id(speed_value)]
      # Change color based on speed zone
      - if:
          condition:
            lambda: 'return id(speed_value) > 160;'
          then:
            - lvgl.widget.update:
                id: speed_arc
                indicator:
                  arc_color: 0xFF0000
          else:
            - if:
                condition:
                  lambda: 'return id(speed_value) > 120;'
                then:
                  - lvgl.widget.update:
                      id: speed_arc
                      indicator:
                        arc_color: 0xFFFF00
                else:
                  - lvgl.widget.update:
                      id: speed_arc
                      indicator:
                        arc_color: 0x00FF00

  # Temperature gauge animation (200ms)
  - interval: 200ms
    then:
      - lambda: |-
          id(temp_value) = -10 + (rand() % 50);
      - lvgl.arc.update:
          id: demo_temp_arc
          value: !lambda 'return id(temp_value);'
          animated: true
      - lvgl.label.update:
          id: demo_temp_value_label
          text:
            format: "%d°C"
            args: [id(temp_value)]

  # Pressure gauge animation (300ms)
  - interval: 300ms
    then:
      - lambda: |-
          id(pressure_value) = rand() % 11;
      - lvgl.arc.update:
          id: pressure_arc
          value: !lambda 'return id(pressure_value);'
          animated: true
      - lvgl.label.update:
          id: pressure_value_label
          text:
            format: "%d bar"
            args: [id(pressure_value)]

  # Clock animation for Example 6 (1000ms)
  - interval: 1000ms
    then:
      - lambda: |-
          id(clock_second)++;
          if (id(clock_second) >= 60) {
            id(clock_second) = 0;
            id(clock_minute)++;
            if (id(clock_minute) >= 60) {
              id(clock_minute) = 0;
              id(clock_hour)++;
              if (id(clock_hour) >= 12) id(clock_hour) = 0;
            }
          }
      - lvgl.scale.needle.update:
          scale_id: clock_scale
          needle_id: hour_needle
          value: !lambda 'return id(clock_hour) * 5 + id(clock_minute) / 12;'
      - lvgl.scale.needle.update:
          scale_id: clock_scale
          needle_id: minute_needle
          value: !lambda 'return id(clock_minute);'
      - lvgl.scale.needle.update:
          scale_id: clock_scale
          needle_id: second_needle
          value: !lambda 'return id(clock_second);'

  # Heart rate animation for Example 10 (100ms)
  - interval: 100ms
    then:
      - lambda: |-
          id(heart_rate_value) += id(hr_direction) * (1 + rand() % 3);
          if (id(heart_rate_value) >= 180) id(hr_direction) = -1;
          if (id(heart_rate_value) <= 50) id(hr_direction) = 1;
      - lvgl.scale.needle.update:
          scale_id: hr_scale
          needle_id: hr_needle
          value: !lambda 'return id(heart_rate_value);'
      - lvgl.label.update:
          id: hr_value_label
          text:
            format: "%d"
            args: [id(heart_rate_value)]

  # Compass animation for Example 12 (50ms)
  - interval: 50ms
    then:
      - lambda: |-
          id(compass_heading) = (id(compass_heading) + 1) % 360;
      - lvgl.scale.update:
          id: compass_scale
          rotation: !lambda 'return 360 - id(compass_heading);'
      - lvgl.label.update:
          id: compass_heading_label
          text:
            format: "%d°"
            args: [id(compass_heading)]

  # ==========================================================================
  # NEED FOR SPEED Racing Dashboard Animation (30ms for smooth racing feel)
  # ==========================================================================
  - interval: 30ms
    then:
      - lambda: |-
          // Realistic racing car acceleration/deceleration
          static int target_rpm = 7500;
          static int shift_delay = 0;

          if (id(nfs_accelerating)) {
            // Accelerating - RPM builds up, then shifts
            id(nfs_rpm) += 80 + (rand() % 40);

            // Shift up when hitting redline
            if (id(nfs_rpm) >= 8500) {
              if (id(nfs_gear) < 6) {
                id(nfs_gear)++;
                id(nfs_rpm) = 4500 + (rand() % 500);  // RPM drops after shift
                shift_delay = 5;
              } else {
                // Top gear - maintain high RPM
                id(nfs_rpm) = 7500 + (rand() % 1000);
              }
            }

            // Speed increases based on gear and RPM
            int speed_increase = (id(nfs_rpm) / 1500) * id(nfs_gear) / 3;
            id(nfs_speed) += speed_increase;
            if (id(nfs_speed) > 320) id(nfs_speed) = 320;

            // Random braking events
            if (id(nfs_speed) > 280 && (rand() % 100) < 3) {
              id(nfs_accelerating) = false;
            }
          } else {
            // Braking/Decelerating
            id(nfs_rpm) -= 150;
            id(nfs_speed) -= 8;

            // Downshift
            if (id(nfs_rpm) < 2500 && id(nfs_gear) > 1) {
              id(nfs_gear)--;
              id(nfs_rpm) = 5500;
            }

            if (id(nfs_rpm) < 800) id(nfs_rpm) = 800;
            if (id(nfs_speed) < 0) {
              id(nfs_speed) = 0;
              id(nfs_accelerating) = true;
              id(nfs_gear) = 1;
            }

            // Resume acceleration
            if (id(nfs_speed) < 80 && (rand() % 100) < 10) {
              id(nfs_accelerating) = true;
            }
          }
      # Update NFS Speedometer
      - lvgl.arc.update:
          id: nfs_speed_arc
          value: !lambda 'return id(nfs_speed);'
      - lvgl.label.update:
          id: nfs_speed_label
          text:
            format: "%d"
            args: [id(nfs_speed)]
      # Update NFS Tachometer (RPM)
      - lvgl.arc.update:
          id: nfs_rpm_arc
          value: !lambda 'return id(nfs_rpm);'
      - lvgl.label.update:
          id: nfs_rpm_label
          text:
            format: "%d"
            args: [id(nfs_rpm)]
      # Update Gear indicator
      - lvgl.label.update:
          id: nfs_gear_label
          text:
            format: "%d"
            args: [id(nfs_gear)]
      # RPM arc color - redline effect
      - if:
          condition:
            lambda: 'return id(nfs_rpm) >= 7500;'
          then:
            - lvgl.widget.update:
                id: nfs_rpm_arc
                indicator:
                  arc_color: 0xFF0000
          else:
            - if:
                condition:
                  lambda: 'return id(nfs_rpm) >= 6000;'
                then:
                  - lvgl.widget.update:
                      id: nfs_rpm_arc
                      indicator:
                        arc_color: 0xFF6600
                else:
                  - lvgl.widget.update:
                      id: nfs_rpm_arc
                      indicator:
                        arc_color: 0x00FFFF

# =============================================================================
# LVGL CONFIGURATION
# =============================================================================
lvgl:
  displays:
    - display_id: my_display
      pages:
        # =====================================================================
        # EXAMPLE 1: A simple horizontal scale (lv_example_scale_1)
        # =====================================================================
        - id: example_1_page
          bg_color: 0x1a1a2e
          widgets:
            - label:
                x: 20
                y: 10
                text: "Ex.1 - Simple Horizontal Scale"
                text_color: 0xFFFFFF
                text_font: montserrat_16

            - scale:
                id: horizontal_simple_scale
                align: CENTER
                width: 350
                height: 80
                mode: HORIZONTAL_BOTTOM
                min_value: 10
                max_value: 40
                ticks:
                  count: 31
                  width: 2
                  length: 10
                  color: 0x808080
                  major:
                    stride: 5
                    width: 4
                    length: 20
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 10

        # =====================================================================
        # EXAMPLE 2: A vertical scale with section and custom styling
        #            + text_src (lv_example_scale_2)
        # =====================================================================
        - id: example_2_page
          bg_color: 0x1a1a2e
          widgets:
            - label:
                x: 20
                y: 10
                text: "Ex.2 - Vertical + text_src + Sections"
                text_color: 0xFFFFFF
                text_font: montserrat_16

            - scale:
                id: vertical_custom_scale
                x: 80
                y: 60
                width: 120
                height: 250
                mode: VERTICAL_LEFT
                min_value: 0
                max_value: 40
                # Custom text labels (lv_scale_set_text_src)
                text_src:
                  - "Cold"
                  - "10"
                  - "20"
                  - "Room"
                  - "Hot"
                ticks:
                  count: 41
                  width: 2
                  length: 8
                  color: 0x404040
                  major:
                    stride: 10
                    width: 4
                    length: 18
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 15
                sections:
                  - id: vert_cold
                    range_from: 0
                    range_to: 10
                    color: 0x00BFFF
                    width: 6
                    # Multi-part styling: minor ticks too
                    items:
                      color: 0x0088CC
                      width: 2
                  - id: vert_comfort
                    range_from: 10
                    range_to: 28
                    color: 0x00FF00
                    width: 6
                    items:
                      color: 0x00CC00
                      width: 2
                  - id: vert_hot
                    range_from: 28
                    range_to: 40
                    color: 0xFF4500
                    width: 6
                    items:
                      color: 0xCC3300
                      width: 2

        # =====================================================================
        # EXAMPLE 3: A simple round scale with needles
        #            (lv_example_scale_3) - Line + Image needle
        # =====================================================================
        - id: example_3_page
          bg_color: 0x1a1a2e
          widgets:
            - label:
                x: 20
                y: 10
                text: "Ex.3 - Round Scale with Needles"
                text_color: 0xFFFFFF
                text_font: montserrat_16

            - scale:
                id: round_needle_scale
                align: CENTER
                width: 280
                height: 280
                mode: ROUND_INNER
                min_value: 0
                max_value: 100
                rotation: 135
                angle_range: 270
                ticks:
                  count: 21
                  width: 2
                  length: 10
                  color: 0x808080
                  major:
                    stride: 4
                    width: 4
                    length: 20
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 10
                # Line needle (lv_scale_set_line_needle_value)
                needles:
                  - id: gauge_needle
                    value: 50
                    needle_length: 60
                    needle_width: 4
                    needle_color: 0xFF0000
                    needle_rounded: true

        # =====================================================================
        # EXAMPLE 4: A round scale with section and custom styling + text_src
        #            (lv_example_scale_4)
        # =====================================================================
        - id: example_4_page
          bg_color: 0x1a1a2e
          widgets:
            - label:
                x: 20
                y: 10
                text: "Ex.4 - Round + Sections + text_src"
                text_color: 0xFFFFFF
                text_font: montserrat_16

            - scale:
                id: round_section_scale
                align: CENTER
                width: 280
                height: 280
                mode: ROUND_OUTER
                min_value: 0
                max_value: 100
                rotation: 135
                angle_range: 270
                # Custom text labels
                text_src:
                  - "Min"
                  - "20"
                  - "40"
                  - "60"
                  - "80"
                  - "Max"
                ticks:
                  count: 21
                  width: 2
                  length: 10
                  color: 0x404040
                  major:
                    stride: 4
                    width: 4
                    length: 20
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 12
                sections:
                  - id: round_green
                    range_from: 0
                    range_to: 50
                    color: 0x00FF00
                    width: 6
                  - id: round_yellow
                    range_from: 50
                    range_to: 80
                    color: 0xFFFF00
                    width: 6
                  - id: round_red
                    range_from: 80
                    range_to: 100
                    color: 0xFF0000
                    width: 6
                needles:
                  - id: round_section_needle
                    value: 35
                    needle_length: 55
                    needle_width: 3
                    needle_color: 0xFF0000

        # =====================================================================
        # EXAMPLE 5: A scale with section and multi-part custom styling
        #            (lv_example_scale_5) - INDICATOR, ITEMS, MAIN parts
        # =====================================================================
        - id: example_5_page
          bg_color: 0x1a1a2e
          widgets:
            - label:
                x: 20
                y: 10
                text: "Ex.5 - Multi-part Section Styling"
                text_color: 0xFFFFFF
                text_font: montserrat_16

            - scale:
                id: multipart_scale
                align: CENTER
                width: 300
                height: 300
                mode: ROUND_OUTER
                min_value: 25
                max_value: 35
                rotation: 135
                angle_range: 270
                ticks:
                  count: 10
                  width: 2
                  length: 10
                  color: 0xFF0000
                  major:
                    stride: 5
                    width: 4
                    length: 20
                    color: 0x00FF00
                    label_show: true
                    label_gap: 10
                sections:
                  - id: multi_section_1
                    range_from: 25
                    range_to: 30
                    color: 0xFF0000
                    width: 5
                    # Multi-part: style major ticks (INDICATOR) differently
                    indicator:
                      color: 0x00FF00
                      width: 6
                    # Multi-part: style minor ticks (ITEMS) differently
                    items:
                      color: 0xFF0000
                      width: 3
                    # Multi-part: style main line (MAIN) differently
                    main:
                      color: 0x0000FF
                      width: 4

        # =====================================================================
        # EXAMPLE 6: A round scale with multiple needles (clock)
        #            (lv_example_scale_6)
        # =====================================================================
        - id: example_6_page
          bg_color: 0x1a1a2e
          widgets:
            - label:
                x: 20
                y: 10
                text: "Ex.6 - Clock with Multiple Needles"
                text_color: 0xFFFFFF
                text_font: montserrat_16

            - scale:
                id: clock_scale
                align: CENTER
                width: 280
                height: 280
                mode: ROUND_OUTER
                min_value: 0
                max_value: 60
                rotation: 270
                angle_range: 360
                # Custom labels for clock hours
                text_src:
                  - "12"
                  - "1"
                  - "2"
                  - "3"
                  - "4"
                  - "5"
                  - "6"
                  - "7"
                  - "8"
                  - "9"
                  - "10"
                  - "11"
                  - ""
                ticks:
                  count: 61
                  width: 1
                  length: 6
                  color: 0x808080
                  major:
                    stride: 5
                    width: 3
                    length: 15
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 18
                # Three needles: hour, minute, second
                needles:
                  - id: hour_needle
                    value: 50
                    needle_length: 40
                    needle_width: 5
                    needle_color: 0xFFFFFF
                    needle_rounded: true
                  - id: minute_needle
                    value: 10
                    needle_length: 55
                    needle_width: 3
                    needle_color: 0xCCCCCC
                    needle_rounded: true
                  - id: second_needle
                    value: 30
                    needle_length: 60
                    needle_width: 1
                    needle_color: 0xFF0000
                    needle_rounded: false

        # =====================================================================
        # EXAMPLE 7: Customizing label color with draw event callback
        #            (lv_example_scale_7)
        # =====================================================================
        - id: example_7_page
          bg_color: 0x1a1a2e
          widgets:
            - label:
                x: 20
                y: 10
                text: "Ex.7 - Custom Label Color (Draw CB)"
                text_color: 0xFFFFFF
                text_font: montserrat_16

            - scale:
                id: custom_label_scale
                align: CENTER
                width: 300
                height: 300
                mode: ROUND_OUTER
                min_value: 0
                max_value: 100
                rotation: 135
                angle_range: 270
                ticks:
                  count: 21
                  width: 2
                  length: 10
                  color: 0x808080
                  major:
                    stride: 2
                    width: 4
                    length: 20
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 12
                sections:
                  - id: cb_green
                    range_from: 0
                    range_to: 40
                    color: 0x00FF00
                    width: 4
                  - id: cb_yellow
                    range_from: 40
                    range_to: 70
                    color: 0xFFFF00
                    width: 4
                  - id: cb_red
                    range_from: 70
                    range_to: 100
                    color: 0xFF0000
                    width: 4
                # Custom draw event callback: color labels based on value
                custom_label_cb: |-
                  lv_draw_task_t *draw_task = lv_event_get_draw_task(e);
                  lv_draw_dsc_base_t *base_dsc = (lv_draw_dsc_base_t *)lv_draw_task_get_draw_dsc(draw_task);
                  if (base_dsc->part == LV_PART_INDICATOR) {
                    lv_draw_label_dsc_t *label_dsc = lv_draw_task_get_label_dsc(draw_task);
                    if (label_dsc) {
                      // Get the tick index from id1
                      uint32_t tick_idx = base_dsc->id1;
                      // Color labels based on position
                      if (tick_idx <= 4) {
                        label_dsc->color = lv_color_hex(0x00FF00);  // Green
                      } else if (tick_idx <= 7) {
                        label_dsc->color = lv_color_hex(0xFFFF00);  // Yellow
                      } else {
                        label_dsc->color = lv_color_hex(0xFF0000);  // Red
                      }
                    }
                  }

        # =====================================================================
        # EXAMPLE 8: A round scale with labels rotated and translated
        #            (lv_example_scale_8)
        # =====================================================================
        - id: example_8_page
          bg_color: 0x1a1a2e
          widgets:
            - label:
                x: 20
                y: 10
                text: "Ex.8 - Round Labels Rotated"
                text_color: 0xFFFFFF
                text_font: montserrat_16

            - scale:
                id: rotated_round_scale
                align: CENTER
                width: 300
                height: 300
                mode: ROUND_OUTER
                min_value: 0
                max_value: 100
                rotation: 135
                angle_range: 270
                ticks:
                  count: 21
                  width: 2
                  length: 10
                  color: 0x808080
                  major:
                    stride: 2
                    width: 4
                    length: 20
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 15
                    # Label rotation: match ticks + keep upright
                    rotate_match_ticks: true
                    keep_upright: true
                    translate_x: 0
                    translate_y: -5

        # =====================================================================
        # EXAMPLE 9: A horizontal scale with labels rotated and translated
        #            (lv_example_scale_9)
        # =====================================================================
        - id: example_9_page
          bg_color: 0x1a1a2e
          widgets:
            - label:
                x: 20
                y: 10
                text: "Ex.9 - Horizontal Labels Rotated"
                text_color: 0xFFFFFF
                text_font: montserrat_16

            - scale:
                id: rotated_h_scale
                align: CENTER
                width: 400
                height: 100
                mode: HORIZONTAL_TOP
                min_value: 0
                max_value: 100
                ticks:
                  count: 21
                  width: 2
                  length: 10
                  color: 0x808080
                  major:
                    stride: 2
                    width: 4
                    length: 20
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 10
                    # Rotate labels on horizontal scale
                    rotate_match_ticks: true
                    translate_x: 5
                    translate_y: -10

        # =====================================================================
        # EXAMPLE 10: Heart Rate Monitor with needle
        #             (lv_example_scale_10)
        # =====================================================================
        - id: example_10_page
          bg_color: 0x0a0a14
          widgets:
            - label:
                x: 20
                y: 10
                text: "Ex.10 - Heart Rate Monitor"
                text_color: 0xFF3333
                text_font: montserrat_18

            - scale:
                id: hr_scale
                align: CENTER
                width: 280
                height: 280
                mode: ROUND_INNER
                min_value: 40
                max_value: 200
                rotation: 135
                angle_range: 270
                ticks:
                  count: 33
                  width: 2
                  length: 8
                  color: 0x404040
                  major:
                    stride: 4
                    width: 3
                    length: 15
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 10
                sections:
                  # Resting zone (40-100)
                  - id: hr_resting
                    range_from: 40
                    range_to: 100
                    color: 0x00FF00
                    width: 5
                    items:
                      color: 0x008800
                      width: 2
                  # Active zone (100-140)
                  - id: hr_active
                    range_from: 100
                    range_to: 140
                    color: 0xFFFF00
                    width: 5
                    items:
                      color: 0x888800
                      width: 2
                  # Cardio zone (140-170)
                  - id: hr_cardio
                    range_from: 140
                    range_to: 170
                    color: 0xFF8800
                    width: 5
                    items:
                      color: 0x884400
                      width: 2
                  # Max zone (170-200)
                  - id: hr_max
                    range_from: 170
                    range_to: 200
                    color: 0xFF0000
                    width: 5
                    items:
                      color: 0x880000
                      width: 2
                # Needle for heart rate
                needles:
                  - id: hr_needle
                    value: 72
                    needle_length: 55
                    needle_width: 4
                    needle_color: 0xFF3333
                    needle_rounded: true

            # Heart rate value display
            - label:
                id: hr_value_label
                align: CENTER
                y: 15
                text: "72"
                text_color: 0xFF3333
                text_font: montserrat_36

            - label:
                align: CENTER
                y: 50
                text: "BPM"
                text_color: 0xFF6666
                text_font: montserrat_14

        # =====================================================================
        # EXAMPLE 11: Sunset/Sunrise Widget with text_src + sections
        #             (lv_example_scale_11) - 24h circular display
        # =====================================================================
        - id: example_11_page
          bg_color: 0x1a1a2e
          widgets:
            - label:
                x: 20
                y: 10
                text: "Ex.11 - Sunrise/Sunset (24h)"
                text_color: 0xFFFF00
                text_font: montserrat_16

            - scale:
                id: sunrise_scale
                align: CENTER
                width: 300
                height: 300
                mode: ROUND_INNER
                min_value: 0
                max_value: 24
                rotation: 270
                angle_range: 360
                # 24 hour labels
                text_src:
                  - "12"
                  - "1"
                  - "2"
                  - "3"
                  - "4"
                  - "5"
                  - "6"
                  - "7"
                  - "8"
                  - "9"
                  - "10"
                  - "11"
                  - "12"
                  - "13"
                  - "14"
                  - "15"
                  - "16"
                  - "17"
                  - "18"
                  - "19"
                  - "20"
                  - "21"
                  - "22"
                  - "23"
                  - ""
                ticks:
                  count: 25
                  width: 2
                  length: 6
                  color: 0x404040
                  major:
                    stride: 1
                    width: 3
                    length: 12
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 12
                    rotate_match_ticks: true
                    keep_upright: true
                sections:
                  # Night section (17-5)
                  - id: night_section
                    range_from: 17
                    range_to: 24
                    color: 0x003366
                    width: 8
                    main:
                      color: 0x003366
                      width: 8
                  - id: night_section_2
                    range_from: 0
                    range_to: 5
                    color: 0x003366
                    width: 8
                    main:
                      color: 0x003366
                      width: 8
                  # Day section (5-17)
                  - id: day_section
                    range_from: 5
                    range_to: 17
                    color: 0xCC9900
                    width: 8
                    main:
                      color: 0xCC9900
                      width: 8

            # TODAY label
            - label:
                align: CENTER
                y: -30
                text: "TODAY"
                text_color: 0x808080
                text_font: montserrat_14

            # Sunrise time
            - label:
                align: CENTER
                y: 5
                text: "Sunrise: 6:43"
                text_color: 0xFFAA00
                text_font: montserrat_14

            # Sunset time
            - label:
                align: CENTER
                y: 25
                text: "Sunset: 17:37"
                text_color: 0xFF6600
                text_font: montserrat_14

        # =====================================================================
        # EXAMPLE 12: Compass with needles + text_src + animation
        #             (lv_example_scale_12) - NOT in user's original list
        # =====================================================================
        - id: example_12_page
          bg_color: 0x0a0a14
          widgets:
            - label:
                x: 20
                y: 10
                text: "Ex.12 - Compass"
                text_color: 0x00FFFF
                text_font: montserrat_16

            - scale:
                id: compass_scale
                align: CENTER
                width: 280
                height: 280
                mode: ROUND_INNER
                min_value: 0
                max_value: 360
                rotation: 270
                angle_range: 360
                # Cardinal direction labels
                text_src:
                  - "N"
                  - "NE"
                  - "E"
                  - "SE"
                  - "S"
                  - "SW"
                  - "W"
                  - "NW"
                  - ""
                ticks:
                  count: 61
                  width: 1
                  length: 6
                  color: 0x404040
                  major:
                    stride: 8
                    width: 3
                    length: 15
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 18
                    rotate_match_ticks: true
                    keep_upright: true
                # North pointer needle
                needles:
                  - id: compass_needle
                    value: 0
                    needle_length: 60
                    needle_width: 4
                    needle_color: 0xFF0000
                    needle_rounded: true

            # Heading value
            - label:
                id: compass_heading_label
                align: CENTER
                y: 20
                text: "0°"
                text_color: 0x00FFFF
                text_font: montserrat_36

            - label:
                align: CENTER
                y: 55
                text: "HEADING"
                text_color: 0x808080
                text_font: montserrat_12

        # =====================================================================
        # PAGE: Speedometer Gauge (ROUND_OUTER) - Scale + Arc combined
        # =====================================================================
        - id: speedometer_page
          bg_color: 0x0a0a14
          widgets:
            - label:
                x: 20
                y: 10
                text: "Speedometer (Scale + Arc)"
                text_color: 0xFFFFFF
                text_font: montserrat_18

            # Scale for tick marks and labels
            - scale:
                id: speed_scale
                align: CENTER
                width: 280
                height: 280
                mode: ROUND_OUTER
                min_value: 0
                max_value: 200
                rotation: 135
                angle_range: 270
                ticks:
                  count: 21
                  width: 2
                  length: 10
                  color: 0x404040
                  major:
                    stride: 2
                    width: 4
                    length: 20
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 12
                sections:
                  # Green zone (0-120 km/h)
                  - id: speed_safe
                    range_from: 0
                    range_to: 120
                    color: 0x00FF00
                    width: 6
                  # Yellow zone (120-160 km/h)
                  - id: speed_caution
                    range_from: 120
                    range_to: 160
                    color: 0xFFFF00
                    width: 6
                  # Red zone (160-200 km/h)
                  - id: speed_danger
                    range_from: 160
                    range_to: 200
                    color: 0xFF0000
                    width: 6

            # Arc for animated indicator
            - arc:
                id: speed_arc
                align: CENTER
                width: 220
                height: 220
                min_value: 0
                max_value: 200
                value: 0
                rotation: 135
                start_angle: 0
                end_angle: 270
                mode: NORMAL
                adjustable: false
                indicator:
                  arc_color: 0x00FF00
                  arc_width: 20
                main:
                  arc_color: 0x1a1a2e
                  arc_width: 20

            # Speed value display
            - label:
                id: speed_value_label
                align: CENTER
                y: 20
                text: "0"
                text_color: 0x00FF00
                text_font: montserrat_36

            - label:
                align: CENTER
                y: 55
                text: "km/h"
                text_color: 0x808080
                text_font: montserrat_14

        # =====================================================================
        # PAGE: Temperature & Humidity Gauges (Dual ROUND_INNER)
        # =====================================================================
        - id: climate_page
          bg_color: 0x0a0a14
          widgets:
            - label:
                x: 20
                y: 10
                text: "Climate Monitor"
                text_color: 0xFFFFFF
                text_font: montserrat_18

            # Temperature Scale (Left)
            - scale:
                id: temp_scale
                x: 30
                y: 60
                width: 200
                height: 200
                mode: ROUND_INNER
                min_value: -20
                max_value: 50
                rotation: 135
                angle_range: 270
                ticks:
                  count: 15
                  width: 2
                  length: 8
                  color: 0x404040
                  major:
                    stride: 3
                    width: 3
                    length: 15
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 8
                sections:
                  - id: temp_cold
                    range_from: -20
                    range_to: 10
                    color: 0x00BFFF
                    width: 5
                  - id: temp_comfort
                    range_from: 10
                    range_to: 28
                    color: 0x00FF00
                    width: 5
                  - id: temp_hot
                    range_from: 28
                    range_to: 50
                    color: 0xFF4500
                    width: 5

            - arc:
                id: demo_temp_arc
                x: 55
                y: 85
                width: 150
                height: 150
                min_value: -20
                max_value: 50
                value: 20
                rotation: 135
                start_angle: 0
                end_angle: 270
                mode: NORMAL
                adjustable: false
                indicator:
                  arc_color: 0x00FF00
                  arc_width: 12
                main:
                  arc_color: 0x1a1a2e
                  arc_width: 12

            - label:
                id: demo_temp_value_label
                x: 80
                y: 155
                width: 100
                text_align: CENTER
                text: "20°C"
                text_color: 0x00FF00
                text_font: montserrat_20

            # Humidity Scale (Right)
            - scale:
                id: humidity_scale
                x: 250
                y: 60
                width: 200
                height: 200
                mode: ROUND_INNER
                min_value: 0
                max_value: 100
                rotation: 135
                angle_range: 270
                ticks:
                  count: 11
                  width: 2
                  length: 8
                  color: 0x404040
                  major:
                    stride: 2
                    width: 3
                    length: 15
                    color: 0xFFFFFF
                    label_show: true
                    label_gap: 8
                sections:
                  - id: humid_dry
                    range_from: 0
                    range_to: 30
                    color: 0xFFAA00
                    width: 5
                  - id: humid_comfort
                    range_from: 30
                    range_to: 60
                    color: 0x00FF00
                    width: 5
                  - id: humid_wet
                    range_from: 60
                    range_to: 100
                    color: 0x00BFFF
                    width: 5

            - arc:
                id: humidity_arc
                x: 275
                y: 85
                width: 150
                height: 150
                min_value: 0
                max_value: 100
                value: 50
                rotation: 135
                start_angle: 0
                end_angle: 270
                mode: NORMAL
                adjustable: false
                indicator:
                  arc_color: 0x00FF00
                  arc_width: 12
                main:
                  arc_color: 0x1a1a2e
                  arc_width: 12

            - label:
                id: humidity_value_label
                x: 300
                y: 155
                width: 100
                text_align: CENTER
                text: "50%"
                text_color: 0x00FF00
                text_font: montserrat_20

        # =====================================================================
        # PAGE: Home Assistant Integration (Real Sensors)
        # =====================================================================
        - id: ha_sensors_page
          bg_color: 0x0a0a14
          widgets:
            - label:
                x: 20
                y: 10
                text: "Home Assistant Sensors"
                text_color: 0xFFFFFF
                text_font: montserrat_18

            # Temperature from HA
            - scale:
                id: ha_temp_scale
                x: 30
                y: 60
                width: 200
                height: 200
                mode: ROUND_OUTER
                min_value: -10
                max_value: 40
                rotation: 135
                angle_range: 270
                ticks:
                  count: 11
                  width: 2
                  length: 8
                  color: 0x404040
                  major:
                    stride: 2
                    width: 3
                    length: 15
                    color: 0xFFFFFF
                    label_show: true
                sections:
                  - id: ha_cold
                    range_from: -10
                    range_to: 15
                    color: 0x00BFFF
                    width: 4
                  - id: ha_comfort
                    range_from: 15
                    range_to: 26
                    color: 0x00FF00
                    width: 4
                  - id: ha_warm
                    range_from: 26
                    range_to: 40
                    color: 0xFF4500
                    width: 4

            - arc:
                id: temp_arc
                x: 55
                y: 85
                width: 150
                height: 150
                min_value: -10
                max_value: 40
                value: 20
                rotation: 135
                start_angle: 0
                end_angle: 270
                mode: NORMAL
                adjustable: false
                indicator:
                  arc_color: 0x00FF00
                  arc_width: 12
                main:
                  arc_color: 0x1a1a2e
                  arc_width: 12

            - label:
                id: temp_value_label
                x: 80
                y: 155
                width: 100
                text_align: CENTER
                text: "--.-°C"
                text_color: 0x00FF00
                text_font: montserrat_18

            - label:
                x: 80
                y: 180
                width: 100
                text_align: CENTER
                text: "Temperature"
                text_color: 0x808080

            # Humidity from HA
            - scale:
                id: ha_humid_scale
                x: 250
                y: 60
                width: 200
                height: 200
                mode: ROUND_OUTER
                min_value: 0
                max_value: 100
                rotation: 135
                angle_range: 270
                ticks:
                  count: 11
                  width: 2
                  length: 8
                  color: 0x404040
                  major:
                    stride: 2
                    width: 3
                    length: 15
                    color: 0xFFFFFF
                    label_show: true
                sections:
                  - id: ha_dry
                    range_from: 0
                    range_to: 30
                    color: 0xFFAA00
                    width: 4
                  - id: ha_ideal
                    range_from: 30
                    range_to: 60
                    color: 0x00FF00
                    width: 4
                  - id: ha_humid
                    range_from: 60
                    range_to: 100
                    color: 0x00BFFF
                    width: 4

            - arc:
                id: ha_humid_arc
                x: 275
                y: 85
                width: 150
                height: 150
                min_value: 0
                max_value: 100
                value: 50
                rotation: 135
                start_angle: 0
                end_angle: 270
                mode: NORMAL
                adjustable: false
                indicator:
                  arc_color: 0x00FF00
                  arc_width: 12
                main:
                  arc_color: 0x1a1a2e
                  arc_width: 12

            - label:
                id: humid_value_label
                x: 300
                y: 155
                width: 100
                text_align: CENTER
                text: "--%"
                text_color: 0x00FF00
                text_font: montserrat_18

            - label:
                x: 300
                y: 180
                width: 100
                text_align: CENTER
                text: "Humidity"
                text_color: 0x808080

        # =====================================================================
        # PAGE: NEED FOR SPEED Racing Dashboard
        # =====================================================================
        - id: nfs_racing_page
          bg_color: 0x000000
          widgets:
            # ===== SPEEDOMETER (Left Side) =====
            - spinner:
                id: nfs_speed_spinner
                x: 20
                y: 30
                width: 280
                height: 280
                arc_length: 90
                spin_time: 2s
                main:
                  arc_width: 6
                  arc_color: 0x001a1a
                indicator:
                  arc_width: 6
                  arc_color: 0x00FFFF
                  arc_opa: 70%

            - scale:
                id: nfs_speed_scale
                x: 30
                y: 40
                width: 260
                height: 260
                mode: ROUND_OUTER
                min_value: 0
                max_value: 320
                rotation: 135
                angle_range: 270
                ticks:
                  count: 33
                  width: 2
                  length: 8
                  color: 0x333333
                  major:
                    stride: 4
                    width: 3
                    length: 18
                    color: 0x00FFFF
                    label_show: true
                    label_gap: 15
                sections:
                  - id: nfs_speed_normal
                    range_from: 0
                    range_to: 180
                    color: 0x00FFFF
                    width: 3
                  - id: nfs_speed_fast
                    range_from: 180
                    range_to: 260
                    color: 0xFF6600
                    width: 3
                  - id: nfs_speed_extreme
                    range_from: 260
                    range_to: 320
                    color: 0xFF0000
                    width: 3

            - arc:
                id: nfs_speed_arc
                x: 55
                y: 65
                width: 210
                height: 210
                min_value: 0
                max_value: 320
                value: 0
                rotation: 135
                start_angle: 0
                end_angle: 270
                mode: NORMAL
                adjustable: false
                indicator:
                  arc_color: 0x00FFFF
                  arc_width: 25
                  arc_opa: 90%
                main:
                  arc_color: 0x0a0a0a
                  arc_width: 25

            - label:
                id: nfs_speed_label
                x: 95
                y: 150
                width: 130
                text_align: CENTER
                text: "0"
                text_color: 0x00FFFF
                text_font: montserrat_48

            - label:
                x: 95
                y: 205
                width: 130
                text_align: CENTER
                text: "KM/H"
                text_color: 0x00FFFF
                text_font: montserrat_14

            # ===== TACHOMETER (Right Side) =====
            - spinner:
                id: nfs_rpm_spinner
                x: 320
                y: 30
                width: 280
                height: 280
                arc_length: 90
                spin_time: 1.5s
                main:
                  arc_width: 6
                  arc_color: 0x001a1a
                indicator:
                  arc_width: 6
                  arc_color: 0x00FFFF
                  arc_opa: 70%

            - scale:
                id: nfs_rpm_scale
                x: 330
                y: 40
                width: 260
                height: 260
                mode: ROUND_OUTER
                min_value: 0
                max_value: 9
                rotation: 135
                angle_range: 270
                ticks:
                  count: 46
                  width: 2
                  length: 6
                  color: 0x333333
                  major:
                    stride: 5
                    width: 3
                    length: 15
                    color: 0x00FFFF
                    label_show: true
                    label_gap: 12
                sections:
                  - id: nfs_rpm_normal
                    range_from: 0
                    range_to: 6
                    color: 0x00FFFF
                    width: 3
                  - id: nfs_rpm_high
                    range_from: 6
                    range_to: 8
                    color: 0xFF6600
                    width: 3
                  - id: nfs_rpm_redline
                    range_from: 8
                    range_to: 9
                    color: 0xFF0000
                    width: 4

            - arc:
                id: nfs_rpm_arc
                x: 355
                y: 65
                width: 210
                height: 210
                min_value: 0
                max_value: 9000
                value: 800
                rotation: 135
                start_angle: 0
                end_angle: 270
                mode: NORMAL
                adjustable: false
                indicator:
                  arc_color: 0x00FFFF
                  arc_width: 25
                  arc_opa: 90%
                main:
                  arc_color: 0x0a0a0a
                  arc_width: 25

            - label:
                id: nfs_rpm_label
                x: 400
                y: 150
                width: 120
                text_align: CENTER
                text: "800"
                text_color: 0x00FFFF
                text_font: montserrat_36

            - label:
                x: 400
                y: 195
                width: 120
                text_align: CENTER
                text: "RPM x1000"
                text_color: 0x00FFFF
                text_font: montserrat_12

            # ===== GEAR INDICATOR (Center) =====
            - obj:
                x: 270
                y: 320
                width: 80
                height: 80
                bg_color: 0x000000
                border_width: 3
                border_color: 0x00FFFF
                radius: 10
                widgets:
                  - label:
                      id: nfs_gear_label
                      align: CENTER
                      text: "1"
                      text_color: 0x00FF00
                      text_font: montserrat_48

            - label:
                x: 270
                y: 405
                width: 80
                text_align: CENTER
                text: "GEAR"
                text_color: 0x808080
                text_font: montserrat_12

            # ===== RACING TITLE =====
            - label:
                x: 200
                y: 420
                width: 220
                text_align: CENTER
                text: "NEED FOR SPEED"
                text_color: 0xFF6600
                text_font: montserrat_20

            - label:
                x: 200
                y: 445
                width: 220
                text_align: CENTER
                text: "RACING DASHBOARD"
                text_color: 0x00FFFF
                text_font: montserrat_14

            # ===== STATUS INDICATORS =====
            - obj:
                x: 20
                y: 330
                width: 100
                height: 30
                bg_color: 0x001a1a
                border_width: 1
                border_color: 0x00FFFF
                radius: 5
                widgets:
                  - label:
                      align: CENTER
                      text: "N2O READY"
                      text_color: 0x00FF00
                      text_font: montserrat_12

            - obj:
                x: 500
                y: 330
                width: 100
                height: 30
                bg_color: 0x001a1a
                border_width: 1
                border_color: 0x00FFFF
                radius: 5
                widgets:
                  - label:
                      align: CENTER
                      text: "TURBO"
                      text_color: 0xFF6600
                      text_font: montserrat_12

# =============================================================================
# TROUBLESHOOTING
# =============================================================================
#
# Scale not animating:
#   - Scale widget only displays ticks/labels (static)
#   - Use Arc widget overlaid on Scale for animated indicator
#   - Or use needles for a gauge-style indicator
#   - Update the Arc/needle value to animate the gauge
#
# Sections not showing:
#   - Check range_from and range_to are within min_value/max_value
#   - Make sure width > 0 for sections
#   - Verify color is valid hex (0xRRGGBB)
#
# Labels not showing:
#   - Set label_show: true in major ticks
#   - Increase label_gap if labels overlap with ticks
#   - Check that mode is set correctly
#
# Arc not aligned with Scale:
#   - Arc and Scale should have same rotation and angle_range
#   - Arc size should be smaller than Scale (to fit inside)
#   - Use same min_value/max_value for both
#
# Needles not showing:
#   - Needles require the scale to be in a ROUND mode
#   - Ensure value is within min_value/max_value range
#   - Check needle_length is > 0
#
# text_src not working:
#   - Array must have one more element than major tick count
#   - Last element should be empty string ""
#   - Labels replace numeric values
#
# Label rotation not working:
#   - Set rotate_match_ticks: true in major ticks
#   - For upright labels: set keep_upright: true
#   - Use translate_x/translate_y to fine-tune position
#
# custom_label_cb not working:
#   - Callback receives lv_event_t pointer as 'e'
#   - Use lv_event_get_draw_task(e) to get draw task
#   - Check base_dsc->part == LV_PART_INDICATOR for labels
#   - Modify label_dsc->color to change label color
#
